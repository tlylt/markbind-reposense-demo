[{"path":".github/workflows/ci.yml","fileType":"yml","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"name: CI"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"on:"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  push:"},{"lineNumber":5,"author":{"gitId":"-"},"content":"    branches:"},{"lineNumber":6,"author":{"gitId":"-"},"content":"      - main"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  schedule:"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    - cron: \u00270 0 * * *\u0027"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"jobs:"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  deploy:"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":13,"author":{"gitId":"-"},"content":"    env:"},{"lineNumber":14,"author":{"gitId":"-"},"content":"      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}"},{"lineNumber":15,"author":{"gitId":"-"},"content":"    steps:"},{"lineNumber":16,"author":{"gitId":"-"},"content":"      - uses: actions/checkout@v3"},{"lineNumber":17,"author":{"gitId":"tlylt"},"content":"      - uses: actions/setup-python@v4"},{"lineNumber":18,"author":{"gitId":"-"},"content":"        with:"},{"lineNumber":19,"author":{"gitId":"tlylt"},"content":"          python-version: \u00273.8\u0027"},{"lineNumber":20,"author":{"gitId":"-"},"content":"      - name: Install dependencies"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        run: pip install requests"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        shell: bash"},{"lineNumber":23,"author":{"gitId":"-"},"content":"      - name: Install Java"},{"lineNumber":24,"author":{"gitId":"-"},"content":"        uses: actions/setup-java@v3"},{"lineNumber":25,"author":{"gitId":"-"},"content":"        with:"},{"lineNumber":26,"author":{"gitId":"-"},"content":"          java-version: \u002711\u0027"},{"lineNumber":27,"author":{"gitId":"-"},"content":"          distribution: \u0027temurin\u0027"},{"lineNumber":28,"author":{"gitId":"-"},"content":"      - name: Generate RepoSense"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        run: bash ./run.sh"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        shell: bash"},{"lineNumber":31,"author":{"gitId":"tlylt"},"content":"      - uses: actions/setup-node@v3"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        with:"},{"lineNumber":33,"author":{"gitId":"tlylt"},"content":"          node-version: \u002714\u0027"},{"lineNumber":34,"author":{"gitId":"-"},"content":"      - run: npm i -g markbind-cli"},{"lineNumber":35,"author":{"gitId":"-"},"content":"      - run: markbind build"},{"lineNumber":36,"author":{"gitId":"-"},"content":"      - run: markbind deploy --ci"}],"authorContributionMap":{"tlylt":4,"-":32}},{"path":"README.md","fileType":"md","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"# markbind-reposense-demo"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"A demo site showing how to deploy your RepoSense report along with your MarkBind site."},{"lineNumber":4,"author":{"gitId":"-"},"content":"- The deployed MarkBind Site is available at: https://tlylt.github.io/markbind-reposense-demo/"},{"lineNumber":5,"author":{"gitId":"-"},"content":"- The deployed RepoSense Report is available at: https://tlylt.github.io/markbind-reposense-demo/reposense-report/index.html"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"## Details"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"**By default, MarkBind will copy all the files as assets of the generated site.**"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"If the reposense report is in the same directory as the source files of a MarkBind site, you can just run `markbind build` to generate the site and have the report available at `/reposense-report/index.html`"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"- Suppose `reposense-report` is the name of the directory containing the report"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"-"},"content":"To prevent MarkBind from doing any sorts of processing with the generated report, add the following into your `site.json`:"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"```json"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  \"pagesExclude\": [\"reposense-report/*\"],"},{"lineNumber":19,"author":{"gitId":"-"},"content":"```"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"If you use the link to the reposense-report in your source files, you may receive a broken intralink warning if the report is not available yet (if you choose to generate it only in CI). To disable the warning you can either update the following in `site.json`:"},{"lineNumber":22,"author":{"gitId":"-"},"content":"```json"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  \"intrasiteLinkValidation\": {"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    \"enabled\": false"},{"lineNumber":25,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":26,"author":{"gitId":"-"},"content":"```"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"Or, you can add `{no-convert}` to the link, like this:"},{"lineNumber":29,"author":{"gitId":"-"},"content":"```md"},{"lineNumber":30,"author":{"gitId":"-"},"content":"[Here](reposense-report/index.html){no-validation}"},{"lineNumber":31,"author":{"gitId":"-"},"content":"```"},{"lineNumber":32,"author":{"gitId":"-"},"content":"### Strategy 1: Generate locally and add to version control"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"1. Generate the report locally"},{"lineNumber":35,"author":{"gitId":"-"},"content":"   1. e.g. `java -jar RepoSense.jar --config ./configs`"},{"lineNumber":36,"author":{"gitId":"-"},"content":"      1. Assuming you have `RepoSense.jar` downloaded and configs files available in the `configs` folder"},{"lineNumber":37,"author":{"gitId":"-"},"content":"1. Add the report to your version control"},{"lineNumber":38,"author":{"gitId":"-"},"content":"1. Deploy locally via `markbind build` and `markbind deploy` or let it trigger in your CI scripts after the files have been committed and synced to your repository"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"### Strategy 2: Generate during continuous integration and deploy"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"1. Setup a CI script to generate the report"},{"lineNumber":43,"author":{"gitId":"-"},"content":"   1. e.g. see [`.github/workflows/ci.yml`](.github/workflows/ci.yml)"},{"lineNumber":44,"author":{"gitId":"-"},"content":"      1. Assuming you have included `run.sh` and `get-reposense.py` just like this repository and configs files available in the `configs` folder"},{"lineNumber":45,"author":{"gitId":"-"},"content":"      1. Necessary adjustments can be made your CI scripts to suit your needs"},{"lineNumber":46,"author":{"gitId":"-"},"content":"1. Within the CI script, deploy the MarkBind Site after the report has been generated"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"In the `ci.yml`:"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"```yaml"},{"lineNumber":51,"author":{"gitId":"-"},"content":"name: CI"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"on: "},{"lineNumber":54,"author":{"gitId":"-"},"content":"  push:"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    branches:"},{"lineNumber":56,"author":{"gitId":"-"},"content":"      - main"},{"lineNumber":57,"author":{"gitId":"-"},"content":"  schedule:"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    - cron:  \u00270 0 * * *\u0027"},{"lineNumber":59,"author":{"gitId":"-"},"content":"```"},{"lineNumber":60,"author":{"gitId":"-"},"content":"Specifies that the CI script should run every day and also on push to the main branch."},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"```yaml"},{"lineNumber":63,"author":{"gitId":"-"},"content":"jobs:"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  deploy:"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    runs-on: ubuntu-latest"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    env:"},{"lineNumber":67,"author":{"gitId":"-"},"content":"      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    steps:"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    - uses: actions/checkout@v3"},{"lineNumber":70,"author":{"gitId":"tlylt"},"content":"    - uses: actions/setup-python@v4"},{"lineNumber":71,"author":{"gitId":"-"},"content":"      with:"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        python-version: \"3.8\""},{"lineNumber":73,"author":{"gitId":"-"},"content":"    - name: Install dependencies"},{"lineNumber":74,"author":{"gitId":"-"},"content":"      run: pip install requests"},{"lineNumber":75,"author":{"gitId":"-"},"content":"      shell: bash"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    - name: Install Java"},{"lineNumber":77,"author":{"gitId":"-"},"content":"      uses: actions/setup-java@v3"},{"lineNumber":78,"author":{"gitId":"-"},"content":"      with:"},{"lineNumber":79,"author":{"gitId":"-"},"content":"        java-version: \u002711\u0027"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        distribution: \u0027temurin\u0027"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    - name: Generate RepoSense"},{"lineNumber":82,"author":{"gitId":"-"},"content":"      run: bash ./run.sh"},{"lineNumber":83,"author":{"gitId":"-"},"content":"      shell: bash"},{"lineNumber":84,"author":{"gitId":"-"},"content":"```"},{"lineNumber":85,"author":{"gitId":"-"},"content":"The installation and generation of the RepoSense report."},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"```yaml"},{"lineNumber":88,"author":{"gitId":"tlylt"},"content":"    - uses: actions/setup-node@v3"},{"lineNumber":89,"author":{"gitId":"-"},"content":"      with:"},{"lineNumber":90,"author":{"gitId":"tlylt"},"content":"        node-version: \u002714\u0027"},{"lineNumber":91,"author":{"gitId":"-"},"content":"    - run: npm i -g markbind-cli"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    - run: markbind build"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    - run: markbind deploy --ci"},{"lineNumber":94,"author":{"gitId":"-"},"content":"```"},{"lineNumber":95,"author":{"gitId":"-"},"content":"Finally, the deployment of the MarkBind site."},{"lineNumber":96,"author":{"gitId":"-"},"content":""},{"lineNumber":97,"author":{"gitId":"-"},"content":"## Troubleshooting"},{"lineNumber":98,"author":{"gitId":"-"},"content":""},{"lineNumber":99,"author":{"gitId":"-"},"content":"1. You may need to ensure that the scripts are executable (something that may not be true when using a Windows machine)"},{"lineNumber":100,"author":{"gitId":"-"},"content":"   - By doing:"},{"lineNumber":101,"author":{"gitId":"-"},"content":"     - `git update-index --chmod\u003d+x run.sh`"},{"lineNumber":102,"author":{"gitId":"-"},"content":"     - `git update-index --chmod\u003d+x get-reposense.py`"},{"lineNumber":103,"author":{"gitId":"-"},"content":""},{"lineNumber":104,"author":{"gitId":"-"},"content":"1. You may need to ensure that the access is granted to the workflows for deployment"},{"lineNumber":105,"author":{"gitId":"-"},"content":"   - By going to `settings` in the GitHub UI and ensuring that the `Actions \u003e General \u003e Workflow permissions` are set to `Read and write permissions`"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"1. You may need to ensure that the GitHub Pages source is set"},{"lineNumber":108,"author":{"gitId":"-"},"content":"   - By going to `settings` in the GitHub UI and ensuring that the `Pages \u003e Source` is set to `Branch: gh-pages`, `Folder:/(root)`"}],"authorContributionMap":{"tlylt":3,"-":105}}]
